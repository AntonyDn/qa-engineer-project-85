---
- summary: |
    Успешная авторизация через GitHub
  requirement: |
    При верном вводе логине и пароля от Github пользователь должен войти в систему
  prerequisites: |
    У пользователдя есть учетная запись в  Github. Открыта страница логина
  test-data: |
    - Учетные данные от Github
  steps:
    - Нажать "Войти через GitHub"
    - Авторизоваться в GitHub
    - Нажимаем кнопку «Войти»
  expected-result: |
    Пользователь должен авторизоваться в системе и попасть на главную страницу. В правом верхнем углу видна иконка профила с его рейтингом. Открыто лобби.

- summary: |
    Успешная авторизация через Discord
  requirement: |
    При верном вводе логине и пароля от Discord пользователь должен войти в систему
  prerequisites: |
    У пользователдя есть учетная запись в  Discort. Открыта страница логина
  test-data: |
    - Учетные данные от Discord
  steps:
    - Нажать "Войти через Discord"
    - Авторизоваться в Discord
    - Нажимаем кнопку «Вход»
  expected-result: |
    Пользователь должен авторизоваться в системе и попасть на главную страницу

- summary: |
    Успешная регистрация нового пользователя с валидными данными
  requirement: |
    При верном вводе email и пароля пользователь должен авторизоваться
  prerequisites: |
    Открыта страница логина
  test-data: |
    No data
  steps:
    - Нажать "Зарегистрироваться"
    - Ввести Nickname, например Testhexlet1
    - Ввести Email, например testhexlet12025@gmail.com
    - Ввести Password, например Testhexlet.2025
    - Ввести Password Confirmation, Testhexlet.2025
    - Нажать Submir
  expected-result: |
    Пользователь должен авторизоваться в системе и попасть на главную страницу

- summary: |
    Успешная авторизация зарегистированного пользователя
  requirement: |
    При верном вводе email и пароля пользователь должен авторизоваться
  prerequisites: |
    Пользователь зарегистрирован в системе. Открыта страница логина
  test-data: |
    Email: testhexlet2025@gmail.com
    Пароль: Testhexlet.2025
  steps:
    - Ввести email в поле "Email"
    - Ввести пароль в поле "Пароль"
    - Нажать кнопку "Войти"
  expected-result: |
    Пользователь должен авторизоваться в системе и попасть на главную страницу

- summary: |
    Невозможность входа с неверным паролем
  requirement: |
    При неверном пароле система должна показать ошибку
  prerequisites: |
    Пользователь зарегистрирован. Открыта страница логина
  test-data: |
    Email: testhexlet2025@gmail.com
    Пароль: Testhexlet.2025
  steps:
    - Ввести корректный email
    - Ввести неверный пароль
    - Нажать "Войти"
  expected-result: |
    1. Появляется красное сообщение: "Неверный email или пароль"
    2. Пароль очищается (поле становится пустым)

- summary: |
    Создание игры с ботом
  requirement: |
    Пользователь может создать новый баттл с выбором языка и сложности и времени прохождения
  prerequisites: |
    Пользователь авторизован на сайте. Открыта главная страница
  test-data: |
    нет
  steps:
    - Нажимаем кнопку "create a game"
    - В строке "game type" выбираем "with a bot"
    - Остальные параметры оставляем дефолтными
    - Нажимаем кнопку "create a battle"
  expected-result: |
    Пользователь должен создать игру против бота

- summary: |
    Создание игры с другим пользователем
  requirement: |
    Пользователь может создать новый баттл с выбором языка и сложности и времени прохождения
  prerequisites: |
    Пользователь авторизован на сайте. Открыта главная страница.
  test-data: |
    нет
  steps:
    - Нажимаем кнопку "create a game"
    - В строке "game type" выбираем "with other user"
    - Остальные параметры оставляем дефолтными
    - Нажимаем кнопку "create a battle"
  expected-result: |
    Пользователь создал игру против другого пользователя
   

- summary: |
    Проверка отправки сообщений в общий чат
  requirement: |
    Общий чат должен позволять обмениваться сообщениями
  prerequisites: |
    1. Пользователь авторизован
    2. Открыта главная страница
  test-data: |
    Тестовое сообщение: "Добрый день!"
  steps:
    - Ввести сообщение в поле ввода
    - Нажать кнопку "Отправить"
    - Проверить отображение в общем чате
  expected-result: |
    1. Сообщение появляется в истории общего чата
    2. Сообщение сохраняется при обновлении страницы

- summary: |
    Проверка открытия гайда с описанием функционала в созданной игре
  requirement: |
    Открывается гайд с описанием функционала игры
  prerequisites: |
    Пользователь авторизован, создана игра. Открыта страница игры
  test-data: |
    no data
  steps:
    - Нажать на кнопку "Show guide"
  expected-result: |
    Открывается модальное окно с описанием функционала игры
    
- summary: |
    Проверка отправки сообщений в чате баттла
  requirement: |
    Чат должен позволять обмениваться сообщениями во время баттла
  prerequisites: |
    1. Активный PvP-баттл
    2. Открыта вкладка чата
  test-data: |
    Тестовое сообщение: "Добрый день! Начнем игру!?"
  steps:
    - Ввести сообщение в поле ввода
    - Нажать кнопку "Отправить"
    - Проверить отображение у соперника
  expected-result: |
    1. Сообщение появляется в истории чата
    2. Соперник видит сообщение без задержек (>500ms)
    3. Сообщение сохраняется при обновлении страницы

- summary: |
    Успешный просмотр профиля
  requirement: |
    Отображаение информация о пользователе 
  prerequisites: |
    Пользователь авторизован. Открыта главная страница.
  test-data: |
    No data
  steps:
    - В правом верхнем углу нажать на ник пользователя
    - В открывшемся меню нажать "My profile"
  expected-result: |
    Отображается информация о пользователе

- summary: |
    Успешное редактирование профиля
  requirement: |
    Изменения в профиль внесены 
  prerequisites: |
    Пользователь авторизован. Открыта главная страница. 
  test-data: |
    No data
  steps:
    - Открыть страницу профиля
    - Нажать "Редактировать профиль"
    - Изменить имя, аватар,  био
    - Нажать "Сохранить"
  expected-result: |
    Отображается обновленная информация о пользователе

- summary: |
    Приглашение другого пользователя
  requirement: |
    У приглашенного пользователя появляется уведомление
  prerequisites: |
    Пользователь создал игру. Открыта страница игры.
  test-data: |
    No data
  steps:
    - В лобби игры нажать "Пригласить"
    - Выбрать пользователя из списка
    - Отправить приглашение
  expected-result: |
    У выбранного пользователя появляется уведомление о приглашении в игру

- summary: |
    Проверка возможности сброса всех изменений кода
  requirement: |
    Пользователь может сбросить все изменения, введённые в код
  prerequisites: |
    Пользователь авторизован, создана игра
  test-data: |
    no data
  steps:
    - Внести любые изменения в код
    - Нажать "Resert solution"
  expected-result: |
    Все внесённые изменения сбрасываются 

- summary: |
    Принятие приглашения в игру от другого пользователя
  requirement: |
    У пользователя есть возможность принять/отклонить приглашение в игру
  prerequisites: |
    Пользователь получил приглашение. Открыта главная страница.
  test-data: |
    No data
  steps:
    - Открыть уведомление
    - Нажать "Принять" 
  expected-result: |
    - Пользователь принял приглашение (пользователя перенаправили в игру)

- summary: |
    Отклонение приглашения в игру от другого пользователя
  requirement: |
    У пользователя есть возможность принять/отклонить приглашение в игру
  prerequisites: |
    Пользователь получил приглашение. Открыта главная страница.
  test-data: |
    No data
  steps:
    - Открыть уведомление
    - Нажать "Отклонить"
  expected-result: |
    - Пользовтель отклонил приглашение (уведомлений о приглашении в игру нет)

- summary: |
    Присоединение к открытой игре
  requirement: |
    Пользователь присоединяется к открытой игре
  prerequisites: |
    Пользователь авторизован. Открыта главная страница.
  test-data: |
    No data
  steps:
    - Перейти в раздел "Открытые игры"
    - Выбрать игру из списка
    - Нажать "Присоединиться"
  expected-result: |
    Пользователь добавлен в лобби игры

- summary: |
    Проверка возможности сдаться во время игры
  requirement: |
    Пользователь может сдаться во время игры
  prerequisites: |
    Пользователь авторизован, создана игра, открыта страница с игрой.
  test-data: |
    no data
  steps:
    - Нажать синюю кнопку с тремя точками
    - Выбрать "Give up"
    - В модальном окне нажать "Give up'
  expected-result: |
    Появляется модальное окно с анимацией "Game over", проигрыш отображается в личном кабинете

- summary: |
    Проверка возможности запуска написанного кода (Run)
  requirement: |
    Пользователь может запустить написанный в игре код
  prerequisites: |
    Пользователь авторизован, создана игра
  test-data: |
    no data
  steps:
    - Внести любые изменения в код
    - Нажать кнопку "Run"
  expected-result: |
    Происходит запуск кода с сообщением о правильности/неправильности решения

- summary: |
    Запуск "Простой битвы" без авторизации
  requirement: |
    Пользователь присоединяется к открытой игре
  prerequisites: |
    Пользователь не авторизован. Открыта главная страница
  test-data: |
    no data
  steps:
    - Нажать "Попробовать"
    - Выбрать язык
    - Начать решение задачи
  expected-result: |
    Запущена одиночная игра с ограниченным функционалом

- summary: |
    Проверка изменения рейтинга после победы
  requirement: |
    Система должна обновлять рейтинг после победы баттла
  prerequisites: |
    Пользователь завершил баттл с победой
    Исходный рейтинг известен
    Открыта страница с батлом
  test-data: |
    Ожидаемое изменение: увеличение значение рейтинга в зависимости от сложности игры
  steps:
    - Завершить баттл с победой
    - Открыть страницу профиля
    - Проверить значение рейтинга
  expected-result: |
    1. Новый рейтинг увеличился от начального значения
    2. В истории battles отображается корректное изменение

- summary: |
    Проверка изменения рейтинга после поражения в игре
  requirement: |
    Система должна обновлять рейтинг после поражения в игре
  prerequisites: |
    Пользователь завершил баттл с поражением
    Исходный рейтинг известен
    Открыта страница с баттлом
  test-data: |
    Ожидаемое изменение: уменьшение значение рейтенга в зависимости от сложности игры
  steps:
    - Завершить баттл с поражением
    - Открыть страницу профиля
    - Проверить значение рейтинга
  expected-result: |
    1. Новый рейтинг уменьшился от начального значения
    2. В истории battles отображается корректное изменение

- summary: |
    Проверка изменения рейтинга при заврешении игры с результатом ничья
  requirement: |
    Система должна не обновлять рейтинг после игры с результатом ничья
  prerequisites: |
    Пользователь завершил баттл с результатом ничья
    Исходный рейтинг известен
    Открыта страница с баттлом
  test-data: |
    Ожидаемое изменение: рейтинг остался прежним при заврешении игры с результатом ничья
  steps:
    - Завершить баттл с результатом ничья
    - Открыть страницу профиля
    - Проверить значение рейтинга
  expected-result: |
    Рейтинг не изменился
 
- summary: |
     Проверка адаптивности сайта для разных разных мобильных устройств
  requirement: |
    При выборе разных мобильных устройств основные функциональные кнопки отображаются корректно.
  prerequisites: |
    Открыта главная страница проекта.
  test-data: |
    версии мобильных устройств в DevTools
  steps:
    - Открыть инструмент DevTools, выбрать в меню «Дополнительные инструменты → Инструменты разработчика» и нажать на кнопку «Toggle device toolbar» 
    - Выбрать поочередно разные мобильные устройства 

- summary: |
    Отображение кнопки для проверки решения
  requirement: |
    Пользователь имеет кнопку для проверки своего решения
  prerequisites: |
    Пользователь авторизован на сайте. Пользователь вступил в игру
  test-data: |
    нет
  steps:
    - Нажать кнопку "Run"
  expected-result: |
    Кнопка отображается, происходит проверка решения
  expected-result: |
    При выборе разных мобильных устройств основные функциональные кнопки отображаются корректно.

- summary: | 
    Количество попыток проверки решения неограниченно
  requirement: |
    Количество попыток проверки решения неограниченно
  prerequisites: |
    Пользователь авторизован на сайте. Пользователь вступил в игру
  test-data: |
    нет
  steps:
    - Нажать кнопку "Run"
    - Повторить действие
  expected-result: |
    Пользователь может вызывать проверку кода неограниченное число раз

- summary: |
    Модальное окно победителя
  requirement: |
    В случае победы в игре у пользователя появляется модальное окно победителя
  prerequisites: |
    Пользователь авторизован на сайте
  test-data: |
    level = 1
    game type = with a bot
    time control = 10 min
    task = rect_area
    code =
    const _ = require("lodash");
    const R = require("rambda");
    
    const solution = (width, length) => {
      return width * length;
    };
    
    module.exports = solution;
  steps:
    - Создать игру с заданными параметрами
    - Выбрать язык Node.js
    - Дописать код, чтобы он соответствовал коду из test-data
    - Нажать "Run"
  expected-result: |
    Пользователь видит модальное окно победителя

- summary: |
    Пользователь, после поражения, может доиграть до конца отведенного времени
  requirement: |
    Пользователь, после поражения, может доиграть до конца отведенного времени
  prerequisites: |
    Пользователь авторизован на сайте. Пользователь проиграл в игре
  test-data: |
    нет
  steps:
    - Пользователь продолжает играть до истечения отведенного времени
  expected-result: |
    Пользователь может доиграть до конца отведенного времени после поражения

- summary: | 
    После победы в игре появилась кнопка выхода
  requirement: |
    У победителя появилась кнопка "Exit"
  prerequisites: |
    Пользователь авторизован на сайте. Пользователь выиграл в игре
  test-data: |
    нет
  steps:
    - Появилась кнопка "Exit"
  expected-result: |
    Победитель видит кнопку "Exit"

- summary: | 
    После победы кнопка "Exit" выводит на главную страницу
  requirement: |
    Победитель может выйти из игры по нажатию кнопки "exit", которая выведет его на главную страницу
  prerequisites: |
    Пользователь авторизован на сайте. Пользователь выиграл в игре
  test-data: |
    нет
  steps:
    - Нажать кнопку "exit"
  expected-result: |
    Победитель вышел из игры и оказался на главной странице

- summary: | 
    Проверка, что игра удаляется из памяти после выхода обоих игроков
  requirement: |
    Когда оба игрока вышли, игра считается полностью законченной и удаляется из памяти
  prerequisites: |
    Идёт активная игра между двумя игроками
  test-data: |
    Игрок A, Игрок B
  steps:
    - Игрок A нажимает "Выйти из игры"
    - Игрок B нажимает "Выйти из игры"
    - Проверить, что в интерфейсе игра больше не отображается в списке активных игр
  expected-result: |
    Игра не отображается в списке активных игр

- summary: | 
    Сайт совместим с последними версиями браузеров
  requirement: |
    Сайт совместим с последними версиями браузеров
  prerequisites: |
    нет
  test-data: |
    Браузеры Google Chrome v.138, Firefox v.140, Safari v.18.4 (MacOS)
  steps:
    - Открыть главную страницу
    - Создать игру
    - Завершить игру
    - Авторизоваться
    - Открыть профиль пользователя
    - Смненить браузер и повторить шаги
  expected-result: |
    Все шаги выполняются корректно. Сайт корректно работает на последних
    версиях браузеров
